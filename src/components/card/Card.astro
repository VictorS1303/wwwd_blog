---
import Label from "../label/Label.astro"
import Header from "../header/Header.astro"
import TextBlock from "../text_block/TextBlock.astro"
import Image from "../imags/Image.astro"
import Button from "../button/Button.astro"
import FadeOutOverlay from "../generals/overlay/FadeOutOverlay.astro"
import Tab from "../tabs/Tab.astro"

const {
  class: className,
  id: id,
  isBlogPostCard,
  headerText,
  labelText,
  textBlockParagraphText,
  isBlogPostCardText,
  href,
  buttonText,
  isBlogPostCardHeader,
  src,
  alt,
  categories = [],
} = Astro.props
---

{
  isBlogPostCard ? (
    <article
      class="blog-post-card flex flex-col relative w-full md:max-w-[300px]"
      data-title={headerText}
      data-categories={categories
        .map((category) => category.toLowerCase())
        .join(",")}
    >
      <Image src={src} class="h-50 rounded-t-md object-fit" alt={alt} />
      <div class="flex justify-end mt-4">
        {categories.length > 0 && (
          <div class="flex gap-2">
            {categories.length > 0 && (
              <div class="flex gap-2">
                {[...new Set(categories)].map((cat) => (
                  <Tab tabText={cat} />
                ))}
              </div>
            )}
          </div>
        )}
      </div>
      <div class="blog-post-card-content-container flex flex-col gap-2 mt-4 flex-1">
        <div class="blog-post-title-and-topic-container flex justify-between gap-8 items-center">
          <Header
            headerText={headerText}
            isBlogPostCardHeader={isBlogPostCardHeader}
            class="w-[80ch]"
          />
        </div>
        <TextBlock
          class="excerpt line-clamp-4 text-md mb-4"
          textBlockParagraphText={textBlockParagraphText}
          isBlogPostCardText={isBlogPostCardText}
        />
        <Button
          href={href}
          class="relative p-2 mt-auto text-xl rounded-sm bg-[var(--blog-post-card-button-border-color)] text-white"
          buttonText={buttonText}
        />
      </div>
    </article>
  ) : null
}
