---
import DashboardLayout from "../layouts/DashboardLayout.astro"
import DashboardHeroSection from "../components/generals/section/DashbboardHeroSection.astro"
import DashboardPostsSection from "../components/generals/section/DashboardPostsSection.astro"
import { supabaseClient } from "../../js/supabase/supabase_client.js"

// Fetch current session on the server
const {
  data: { session },
} = await supabaseClient.auth.getSession()

const isLoggedIn = !!session?.user

// Example dashboard content
const likedPosts = [
  {
    cardType: "liked",
    src: "/images/landing_hero/landing_hero_bg.webp",
    headerText: "How the browser reads CSS",
    articleHref: "/blog-posts/how-the-browser-reads-css",
  },
  {
    cardType: "liked",
    src: "/images/landing_hero/landing_hero_bg.webp",
    headerText: "How the browser reads CSS",
    articleHref: "/blog-posts/how-the-browser-reads-css",
  },
]

const savedPosts = [
  {
    cardType: "saved",
    src: "/images/landing_hero/landing_hero_bg.webp",
    headerText: "How the browser reads CSS",
    articleHref: "/blog-posts/how-the-browser-reads-css",
  },
]

const likedPost = [
  {
    id: "liked_posts",
    headerText: "Liked Posts",
    isDashboardHeader: true,
    messageText: "No liked posts",
    posts: likedPosts,
  },
]

const savedPost = [
  {
    id: "saved_posts",
    headerText: "Saved Posts",
    isDashboardHeader: true,
    messageText: "No saved posts",
    posts: savedPosts,
  },
]
---

<DashboardLayout title="My Dashboard">
  <DashboardHeroSection
    src="/images/landing_hero/landing_hero_bg.webp"
    alt="profile image"
    isDashboardHeader={true}
  />

  <DashboardPostsSection postsSections={likedPost} />
  <DashboardPostsSection postsSections={savedPost} />
</DashboardLayout>
