---
import Tab from "./Tab.astro"
import { fetchAllPosts } from "../../../js/utils/supabase_methods"

const posts = await fetchAllPosts()
---

<div class="flex gap-2">
  {
    posts && posts.length > 0
      ? posts.flatMap((post) =>
          post.post_categories.map((category) => (
            <a href={`/blog-posts?category=${category.toLowerCase()}`}>
              <Tab tabText={category} />
            </a>
          )),
        )
      : "No category"
  }
</div>
